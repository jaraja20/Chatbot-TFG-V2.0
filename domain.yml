version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - mood_great
  - mood_unhappy
  - bot_challenge
  - agradecimiento
  - agendar_turno
  - cancelar_turno
  - confirmar_turno
  - proporcionar_datos_turno
  - informar_fecha
  - informar_nombre
  - informar_cedula
  - informar_cedula_primera_vez
  - elegir_horario
  - frase_ambigua
  - solicitar_cambio_datos
  - consultar_requisitos
  - consultar_requisitos_primera_vez
  - consultar_menor_edad
  - consultar_extranjeros
  - consultar_si_necesita_turno
  - consultar_tramite_online
  - consultar_tramite_para_terceros
  - consultar_tolerancia_horaria
  - consultar_sin_qr
  - consultar_disponibilidad
  - consultar_horarios
  - consultar_ubicacion
  - consultar_costo
  - estado_tramite
  - ayuda_tecnica
  - consulta_tiempo_espera
  - calcular_saturacion
  - proporcionar_email

entities:
  - nombre
  - cedula
  - fecha
  - hora
  - email

slots:
  nombre:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: nombre
      - type: from_text
        conditions:
          - active_loop: turno_form
            requested_slot: nombre

  cedula:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: cedula
      - type: from_text
        conditions:
          - active_loop: turno_form
            requested_slot: cedula

  fecha:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: fecha
      - type: from_text
        conditions:
          - active_loop: turno_form
            requested_slot: fecha

  hora:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: hora
      - type: from_text
        conditions:
          - active_loop: turno_form
            requested_slot: hora
  
  email:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: email
      - type: from_text
        intent: proporcionar_email

  turno_confirmado:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings:
      - type: custom

  paso_formulario:
    type: categorical
    values: [nombre, cedula, fecha, hora, confirmacion]
    influence_conversation: true
    mappings:
      - type: custom

forms:
  turno_form:
    required_slots:
      - nombre
      - cedula
      - fecha
      - hora

responses:
  utter_greet:
    - text: "Hola! Soy tu asistente virtual para gestiÃ³n de cÃ©dulas de identidad en Ciudad del Este. Â¿En quÃ© puedo ayudarte hoy?"
    - text: "Â¡Bienvenido/a! Te ayudo con todo lo relacionado a trÃ¡mites de cÃ©dula. Â¿QuÃ© necesitÃ¡s?"

  utter_goodbye:
    - text: "Â¡Hasta luego! Que tengas un excelente dÃ­a. RecordÃ¡ llegar puntual a tu cita si agendaste un turno."
    - text: "Â¡Chau! Si necesitÃ¡s algo mÃ¡s sobre tu cÃ©dula, no dudes en consultarme."

  utter_iamabot:
    - text: "Soy un asistente virtual especializado en trÃ¡mites de cÃ©dula de identidad. Estoy aquÃ­ para ayudarte a agendar turnos y resolver tus consultas."

  utter_agradecimiento:
    - text: "Â¡De nada! Es un gusto poder ayudarte. Â¿Hay algo mÃ¡s en lo que pueda asistirte?"
    - text: "Â¡Para eso estoy! Â¿Te puedo ayudar con algo mÃ¡s?"

  utter_happy:
    - text: "Me alegra saber que estÃ¡s bien! Â¿En quÃ© puedo ayudarte con tu trÃ¡mite de cÃ©dula?"

  utter_cheer_up:
    - text: "Espero poder ayudarte y que mejore tu dÃ­a. Â¿QuÃ© necesitÃ¡s para tu cÃ©dula?"

  utter_did_that_help:
    - text: "Â¿Te fue Ãºtil esta informaciÃ³n? Â¿NecesitÃ¡s que te ayude con algo mÃ¡s?"

  utter_ask_nombre:
    - text: "Para agendar tu turno necesito tu nombre completo (nombre y apellido)."
    - text: "Â¿CuÃ¡l es tu nombre completo? Asegurate de incluir nombre y apellido."

  utter_ask_cedula:
    - text: "Â¿CuÃ¡l es tu nÃºmero de cÃ©dula de identidad? Si no tenÃ©s cÃ©dula y es tu primera vez, decime 'es mi primera vez'."
    - text: "ProporcionÃ¡ tu nÃºmero de cÃ©dula. Si nunca tramitaste una, escribÃ­ 'primera vez'."

  utter_ask_fecha:
    - text: "Â¿Para quÃ© fecha necesitÃ¡s el turno? PodÃ©s decir 'maÃ±ana', 'viernes 15', '20 de octubre', etc."
    - text: "Â¿QuÃ© dÃ­a te conviene para el turno? RecordÃ¡ que atendemos de lunes a viernes."

  utter_ask_hora:
    - text: "Â¿A quÃ© hora preferÃ­s el turno? Nuestro horario es de 07:00 a 17:00."
    - text: "Â¿QuÃ© horario te viene bien? Si no estÃ¡s seguro/a, podÃ©s preguntarme por disponibilidad."

  utter_ask_email:
    - text: "Â¿QuerÃ©s recibir una invitaciÃ³n en tu calendario personal? Es opcional. PodÃ©s darme tu email o decir 'no' para continuar sin email."
    - text: "Opcionalmente, puedo enviarte una invitaciÃ³n de calendario a tu email. Â¿CuÃ¡l es tu correo? O decÃ­ 'no' si preferÃ­s no recibirlo."

  utter_confirmar_turno:
    - text: "Perfecto! Voy a mostrarte un resumen de tu turno para que lo confirmes."

  utter_datos_incorrectos:
    - text: "Algunos datos no estÃ¡n completos o son incorrectos. Vamos a corregirlos:"

  utter_turno_guardado_exitosamente:
    - text: "Â¡Excelente! Tu turno fue agendado correctamente."

  utter_error_guardando_turno:
    - text: "Hubo un problema al guardar tu turno. Por favor intentÃ¡ de nuevo en unos minutos o contactÃ¡ al soporte."

  utter_consultar_disponibilidad:
    - text: "Te voy a mostrar la disponibilidad actualizada para los prÃ³ximos dÃ­as:"

  utter_recomendar_horario:
    - text: "SegÃºn el anÃ¡lisis de ocupaciÃ³n, estas son las mejores opciones:"

  utter_frase_ambigua:
    - text: "Entiendo que querÃ©s el mejor horario disponible. DÃ©jame analizar las opciones:"

  utter_horario_no_disponible:
    - text: "Ese horario no estÃ¡ disponible o estÃ¡ fuera del horario de atenciÃ³n. Te sugiero estas alternativas:"

  utter_consultar_requisitos:
    - text: |
        ğŸ“‹ **Requisitos para renovaciÃ³n de cÃ©dula:**
        
        â€¢ CÃ©dula de identidad anterior (original)
        â€¢ Comprobante de pago (25.000 Gs.)
        â€¢ Presentarse personalmente
        
        â° **Horario:** Lunes a viernes de 07:00 a 17:00
        ğŸ“ **Lugar:** Av. Pioneros del Este, Ciudad del Este

  utter_consultar_requisitos_primera_vez:
    - text: |
        ğŸ“‹ **Requisitos para primera cÃ©dula:**
        
        â€¢ Partida de nacimiento **ORIGINAL** (no fotocopia)
        â€¢ Comprobante de pago (25.000 Gs.)
        â€¢ Si sos menor de edad: acompaÃ±ado de padre, madre o tutor
        â€¢ Documentos que acrediten la relaciÃ³n familiar (si aplica)
        
        âš ï¸ **Importante:** La partida debe estar en buen estado y ser legible.

  utter_consultar_menor_edad:
    - text: |
        ğŸ‘¶ **TrÃ¡mites para menores de edad:**
        
        â€¢ Pueden gestionar su cÃ©dula desde los 12 aÃ±os
        â€¢ **OBLIGATORIO:** ir acompaÃ±ado de padre, madre o tutor legal
        â€¢ Presentar documentos que acrediten la relaciÃ³n familiar
        â€¢ El adulto responsable debe firmar documentos
        
        ğŸ“ Los menores no pueden tramitar solos bajo ninguna circunstancia.

  utter_consultar_extranjeros:
    - text: |
        ğŸŒ **TrÃ¡mites para extranjeros:**
        
        â€¢ Tener **residencia legal** en Paraguay
        â€¢ Pasaporte original y vigente
        â€¢ Carnet de migraciÃ³n o documento de residencia
        â€¢ Documentos legalizados por consulado paraguayo (si aplica)
        â€¢ Comprobante de pago
        
        â„¹ï¸ ConsultÃ¡ en Migraciones sobre tu situaciÃ³n especÃ­fica.

  utter_consultar_horarios:
    - text: |
        ğŸ• **Horarios de atenciÃ³n:**
        
        **Lunes a Viernes:** 07:00 a 17:00 horas
        **SÃ¡bados y Domingos:** Cerrado
        **Feriados:** Cerrado
        
        â° **Tolerancia:** 15 minutos despuÃ©s de tu horario agendado
        ğŸ« **Importante:** LlevÃ¡ tu cÃ³digo de turno

  utter_consultar_ubicacion:
    - text: |
        ğŸ“ **Oficina de Identificaciones - Ciudad del Este**
        
        **DirecciÃ³n:** Av. Pioneros del Este
        Ciudad del Este, Alto ParanÃ¡
        
        ğŸš— **Referencias:** Cerca del centro comercial
        ğŸšŒ **Transporte pÃºblico:** LÃ­neas que van al centro
        
        ğŸ’¡ Te recomiendo llegar 15 minutos antes de tu turno.

  utter_consultar_costo:
    - text: |
        ğŸ’° **Costo del trÃ¡mite de cÃ©dula:**
        
        **Primera vez:** 25.000 GuaranÃ­es
        **RenovaciÃ³n:** 25.000 GuaranÃ­es
        **Duplicado por pÃ©rdida:** 25.000 GuaranÃ­es
        
        ğŸ’³ **Formas de pago:** Efectivo en caja
        ğŸ§¾ **Importante:** ConservÃ¡ el comprobante de pago

  utter_consultar_si_necesita_turno:
    - text: |
        ğŸ« **Â¿Es obligatorio el turno?**
        
        **SÃ**, es **OBLIGATORIO** agendar turno para todos los trÃ¡mites.
        
        âŒ **Sin turno no se atiende** a ninguna persona
        âœ… **Con turno** tenÃ©s horario asegurado y menor tiempo de espera
        
        Â¿Te ayudo a agendar tu turno ahora?

  utter_consultar_tramite_online:
    - text: |
        ğŸ’» **TrÃ¡mites online:**
        
        â€¢ **Agenda de turno:** Disponible aquÃ­ conmigo
        â€¢ **Consulta de estado:** Portal web de Identificaciones
        â€¢ **InformaciÃ³n general:** Disponible 24/7
        
        âš ï¸ **Importante:** El trÃ¡mite final **SIEMPRE** es presencial.

  utter_consultar_tramite_para_terceros:
    - text: |
        ğŸ‘¥ **TrÃ¡mites para terceros:**
        
        **NO es posible** tramitar la cÃ©dula de otra persona.
        
        âœ… **Debe ir personalmente** el titular
        âœ… **ExcepciÃ³n:** Menores con adulto responsable
        âŒ **No se acepta:** Apoderados, familiares adultos, amigos
        
        Esta norma es **estricta** por seguridad.

  utter_consultar_tolerancia_horaria:
    - text: |
        â° **Tolerancia de horario:**
        
        â€¢ **15 minutos** despuÃ©s de tu hora agendada
        â€¢ **Ejemplo:** Turno a las 10:00 â†’ hasta las 10:15
        â€¢ **DespuÃ©s de la tolerancia:** PerdÃ©s tu turno
        
        ğŸ’¡ **RecomendaciÃ³n:** LlegÃ¡ 10 minutos antes para estar seguro/a.

  utter_consultar_sin_qr:
    - text: |
        ğŸ“± **CÃ©dulas sin cÃ³digo QR:**
        
        â€¢ **SÃ son vÃ¡lidas** las cÃ©dulas sin QR
        â€¢ **RecomendaciÃ³n:** Renovar por mayor seguridad
        â€¢ **Ventajas del QR:** VerificaciÃ³n mÃ¡s rÃ¡pida
        
        No es urgente cambiarla, pero es conveniente hacerlo.

  utter_estado_tramite:
    - text: |
        ğŸ“Š **Consultar estado del trÃ¡mite:**
        
        ğŸŒ **Portal web:** www.identificaciones.gov.py
        ğŸ“ **TelÃ©fono:** (061) 500-XXX
        ğŸ¢ **Presencialmente:** En la oficina con tu cÃ³digo de turno
        
        NecesitarÃ¡s tu nÃºmero de cÃ©dula o cÃ³digo de trÃ¡mite.

  utter_ayuda_tecnica:
    - text: |
        ğŸ”§ **Problemas tÃ©cnicos:**
        
        **Si tenÃ©s problemas con:**
        â€¢ Esta conversaciÃ³n: RefrescÃ¡ la pÃ¡gina
        â€¢ Portal web: ProbÃ¡ otro navegador
        â€¢ Otros sistemas: ContactÃ¡ soporte
        
        ğŸ“ **Soporte tÃ©cnico:** 0800-123-456 (gratuito)

  utter_cancelar_turno:
    - text: |
        âŒ **CancelaciÃ³n de turno:**
        
        Tu solicitud de cancelaciÃ³n fue registrada.
        
        **Para cancelar definitivamente:**
        ğŸ“ LlamÃ¡ al (061) 500-XXX
        ğŸ¢ Acercate a la oficina
        
        Â¿QuerÃ©s agendar un nuevo turno en su lugar?

  utter_default:
    - text: "No entendÃ­ bien tu consulta. Â¿PodrÃ­as reformularla? Te puedo ayudar con turnos, requisitos, horarios y ubicaciÃ³n."
    - text: "DisculpÃ¡, no comprendÃ­. Te puedo asistir con: agendar turnos, consultar requisitos, horarios de atenciÃ³n y mÃ¡s informaciÃ³n sobre cÃ©dulas."

  utter_out_of_scope:
    - text: "Esa consulta estÃ¡ fuera de mi especialidad. Me enfoco Ãºnicamente en trÃ¡mites de cÃ©dula de identidad. Â¿Te puedo ayudar con algo relacionado?"

  utter_rephrase:
    - text: "No logrÃ© entender tu mensaje. Â¿PodrÃ­as decirlo de otra manera? RecordÃ¡ que te ayudo con turnos y consultas sobre cÃ©dulas."

  utter_restart:
    - text: "Reiniciemos la conversaciÃ³n. Â¿En quÃ© puedo ayudarte con tu trÃ¡mite de cÃ©dula?"

actions:
  - validate_turno_form
  - action_confirmar_datos_turno
  - action_guardar_turno
  - action_recomendar_horario_fuzzy
  - action_consultar_disponibilidad
  - action_tiempo_espera_actual
  - action_calcular_saturacion
  - action_session_start

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false